!function(){"use strict";angular.module("auction",["ngRoute","restangular"]).config(["$routeProvider",function(a){var b=function(a){return a+" | Auction"};a.when("/",{templateUrl:"views/home.html",controller:"HomeController",controllerAs:"ctrl",title:b("Home")}).when("/search",{templateUrl:"views/search.html",controller:"SearchController",controllerAs:"ctrl",title:b("Search")}).when("/product/:productId",{templateUrl:"views/product.html",controller:"ProductController",controllerAs:"ctrl",title:b("Product Details"),resolve:{product:["$route","ProductService",function(a,b){var c=parseInt(a.current.params.productId);return b.getProductById(c)}]}}).otherwise({redirectTo:"/"})}]).config(["RestangularProvider",function(a){a.setBaseUrl("http://46.8.25.156:8080/auction_jaxrs-1.0/api/")}]).run(["$rootScope",function(a){a.$on("$routeChangeStart",function(b,c){a.pageTitle=c.$$route.title})}])}(),function(){"use strict";var a=function(a){var b=this;b.products=[],a.getProducts().then(function(a){b.products=a})};a.$inject=["ProductService"],angular.module("auction").controller("HomeController",a)}(),function(){"use strict";var a=function(a,b,c,d){var e=this;e.product=a,e.Restangular=b,e.ws=new WebSocket("ws://localhost:8080/auction_jaxrs-1.0/ws"),e.WS_SESSION_ID=null,e.placeBid=function(a){d.placeBid(e.product.id,a,this.WS_SESSION_ID).then(function(a){alert(a[0].message)})},e.ws.onmessage=function(a){null===e.WS_SESSION_ID?e.WS_SESSION_ID=a.data:e.product.reservedPrice=a.data.split(":")[1]}};a.$inject=["product","Restangular","UserService","BidService"],angular.module("auction").controller("ProductController",a)}(),function(){"use strict";var a=function(a,b){this.$location=a,this.productService=b;var c=b.importParams(a.search());_.isEmpty(c)||this.find()};a.prototype={find:function(){var a=this.productService.exportParams();this.$location.search(a),this.productService.find(a).then(function(a){this.products=a}.bind(this))}},a.$inject=["$location","ProductService"],angular.module("auction").controller("SearchController",a)}(),function(){"use strict";var a=function(){return{scope:!1,restrict:"A",link:function(a,b){b.datepicker({startDate:new Date})}}};angular.module("auction").directive("auctionDatepicker",a)}(),function(){"use strict";var a=function(){return{scope:!1,restrict:"E",templateUrl:"views/partial/FooterDirective.html"}};angular.module("auction").directive("auctionFooter",a)}(),function(){"use strict";var a=function(){return{scope:!1,restrict:"E",templateUrl:"views/partial/NavbarDirective.html"}};angular.module("auction").directive("auctionNavbar",a)}(),function(){"use strict";var a=function(){return{scope:{minPrice:"@",maxPrice:"@",lowPrice:"=",highPrice:"="},restrict:"E",templateUrl:"views/partial/PriceRangeDirective.html",link:function(a,b){var c=angular.element(b).find("input[type=text]"),d=a.minPrice||0,e=a.maxPrice||500;a.lowPrice=a.lowPrice||d,a.highPrice=a.highPrice||e,c.slider({min:d,max:e,value:[a.lowPrice,a.highPrice]}),c.on("slideStop",function(b){a.$apply(function(){a.lowPrice!==b.value[0]&&(a.lowPrice=b.value[0]),a.highPrice!==b.value[1]&&(a.highPrice=b.value[1])})});var f=function(){return c.slider("getValue")},g=function(a,b){c.slider("setValue",[a,b])};a.$watch("lowPrice",function(a){g(a||d,f()[1])}),a.$watch("highPrice",function(a){g(f()[0],a||e)})}}};angular.module("auction").directive("auctionPriceRange",a)}(),function(){"use strict";var a=function(){return{scope:!1,restrict:"E",templateUrl:"views/partial/SearchFormDirective.html"}};angular.module("auction").directive("auctionSearchForm",a)}(),function(){"use strict";var a={lowPrice:0,highPrice:500,bids:3,category:0,closeDay:null,title:""},b=function(a){this.Restangular=a};b.$inject=["Restangular"],b.prototype={getProducts:function(){var a=this.Restangular.all("product").getList();return a},find:function(a){return this.Restangular.all("product").getList(a)},getProductById:function(a){return this.Restangular.one("product",a).get()},get lowPrice(){return this._lowPrice},set lowPrice(a){this._lowPrice=parseFloat(a)},get highPrice(){return this._highPrice},set highPrice(a){this._highPrice=parseFloat(a)},get bids(){return this._bids},set bids(a){this._bids=parseInt(a)},get category(){return this._category},set category(a){this._category=parseInt(a)},exportParams:function(){return c(this)},importParams:function(a){var a=c(a);return _.assign(this,a),a}};var c=function(b){return _.reduce(b,function(b,c,d){return 0===d.indexOf("_")&&(d=d.substring(1)),_.isString(c)&&_.isEmpty(c.trim())?b:"Restangular"==d?b:(_.isNull(c)||_.isNaN(c)||c===a[d]||(b[d]=c),b)},{})};angular.module("auction").service("ProductService",b)}(),function(){"use strict";var a=function(a){this.Restangular=a};a.$inject=["Restangular"],a.prototype={getUserId:function(){var a=this.Restangular.all("user").getList();return a}},angular.module("auction").service("UserService",a)}(),function(){"use strict";var a=function(a){this.Restangular=a};a.$inject=["Restangular"];a.prototype={placeBid:function(a,b,c){var d={productId:+a,amount:b,desiredQuantity:1,userId:c},e=this.Restangular.all("bid").post(d);return e}},angular.module("auction").service("BidService",a)}();
